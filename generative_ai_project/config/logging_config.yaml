# ==============================================================================
# LOGGING CONFIGURATION - LLM Ransomware Profiling Project
# ==============================================================================

# ------------------------------------------------------------------------------
# FORMATTERS
# ------------------------------------------------------------------------------
formatters:
  # Standard format for console output
  standard:
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    datefmt: "%H:%M:%S"
  
  # Detailed format for file logs
  detailed:
    format: "%(asctime)s - %(name)s - %(levelname)s - %(module)s:%(lineno)d - %(message)s"
    datefmt: "%Y-%m-%d %H:%M:%S"
  
  # Minimal format for console output
  minimal:
    format: "%(message)s"
  
  # Error report format
  error_report:
    format: "[%(asctime)s] %(levelname)s in %(name)s (%(module)s:%(lineno)d)\n%(message)s\n"
    datefmt: "%Y-%m-%d %H:%M:%S"


# ------------------------------------------------------------------------------
# HANDLERS
# ------------------------------------------------------------------------------
handlers:
  # Console handler for warning-level messages
  console:
    class: logging.StreamHandler
    level: WARNING
    formatter: minimal
    stream: ext://sys.stdout
  
  # Main file handler for debug-level logging
  file_handler:
    class: logging.FileHandler
    level: DEBUG
    formatter: detailed
    filename: "logs/project.log"
    mode: "a"
    encoding: "utf8"
  
  # Rotating file handler with size-based rotation
  rotating_file:
    class: logging.handlers.RotatingFileHandler
    level: DEBUG
    formatter: detailed
    filename: "logs/pipeline_rotating.log"
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: "utf8"
  
  # Error-level file handler for critical issues
  error_file:
    class: logging.FileHandler
    level: ERROR
    formatter: error_report
    filename: "logs/errors.log"
    mode: "a"
    encoding: "utf8"
  
  # API error handler for external service issues
  api_error_file:
    class: logging.FileHandler
    level: WARNING
    formatter: error_report
    filename: "logs/api_errors.log"
    mode: "a"
    encoding: "utf8"


# ------------------------------------------------------------------------------
# LOGGERS
# ------------------------------------------------------------------------------
loggers:
  # Main pipeline logger
  RansomPipeline:
    level: INFO
    handlers: [console, file_handler, error_file]
    propagate: False
  
  # LLM client logger for API interactions
  LLMClient:
    level: INFO
    handlers: [file_handler, api_error_file]
    propagate: False
  
  # Error handler logger for retry mechanisms
  ErrorHandler:
    level: DEBUG
    handlers: [file_handler, error_file]
    propagate: False
  
  # Database updater logger
  DatabaseUpdater:
    level: INFO
    handlers: [console, file_handler]
    propagate: False
  
  # Consensus manager logger
  ConsensusManager:
    level: INFO
    handlers: [file_handler]
    propagate: False
  
  # Data loader logger
  DataLoader:
    level: INFO
    handlers: [file_handler]
    propagate: False
  
  # Embedding client logger
  EmbeddingClient:
    level: INFO
    handlers: [file_handler, api_error_file]
    propagate: False
  
  # Visualizer logger
  Visualizer:
    level: INFO
    handlers: [file_handler]
    propagate: False
  
  # Aggregator logger
  Aggregator:
    level: INFO
    handlers: [file_handler]
    propagate: False
  
  # External library loggers
  openai:
    level: WARNING
    handlers: [file_handler]
    propagate: False
  
  httpx:
    level: WARNING
    handlers: [file_handler]
    propagate: False
  
  urllib3:
    level: WARNING
    handlers: [file_handler]
    propagate: False
  
  requests:
    level: WARNING
    handlers: [file_handler]
    propagate: False


# ------------------------------------------------------------------------------
# ROOT LOGGER
# ------------------------------------------------------------------------------
root:
  level: WARNING
  handlers: [console, file_handler]


# ------------------------------------------------------------------------------
# NOTES
# ------------------------------------------------------------------------------
# Console output displays WARNING level and above for operational clarity
# File logs capture DEBUG level and above for comprehensive troubleshooting
# API errors are logged separately for systematic monitoring
# Error logs capture all ERROR level events across modules
# Rotating handler prevents excessive disk usage in production environments
